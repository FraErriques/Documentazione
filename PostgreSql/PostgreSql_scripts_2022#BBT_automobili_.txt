-- Table: public.ge135zj

-- DROP TABLE public.ge135zj;

CREATE TABLE IF NOT EXISTS public.ge135zj
(
    ge135zj_id integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    data date,
    km real,
    rifornimento_luogo character varying(255) COLLATE pg_catalog."default" NOT NULL,
    litri real,
    gasolio_euro_litro real,
    gasolio_euro real,
    accessori_descr character varying(255) COLLATE pg_catalog."default",
    accessori_euro real,
    lavaggio_descr character varying(255) COLLATE pg_catalog."default",
    lavaggio_euro real,
    manutenzione_descr character varying(255) COLLATE pg_catalog."default",
    data_ingresso_officina date,
    data_uscita_officina date,
    manutenzione_euro real,
    altro_descriz character varying(255) COLLATE pg_catalog."default",
    altro_euro real,
    sinistro_descriz character varying(255) COLLATE pg_catalog."default",
    conducente character varying(255) COLLATE pg_catalog."default",
    descrizione_riga character varying(255) COLLATE pg_catalog."default" NOT NULL,
    costo_totale_riga real NOT NULL,
    franchigia_assicurazione real,
    CONSTRAINT ge135zj_pkey PRIMARY KEY (ge135zj_id)
)

TABLESPACE pg_default;

ALTER TABLE public.ge135zj
    OWNER to postgres;
-----------------------------------------------------------------------##############


CREATE TABLE IF NOT EXISTS public.targa#placeholder#_
(
targa#placeholder#_id integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
DATA date,
KM real,
RIFORNIMENTO_luogo character varying(255) COLLATE pg_catalog."default" NOT NULL,
LITRI real,
GASOLIO_euro/litro	real,
GASOLIO_euro real,
ACCESSORI_descr  character varying(255) COLLATE pg_catalog."default" NULL,
ACCESSORI_euro	real,
LAVAGGIO_descr  character varying(255) COLLATE pg_catalog."default" NULL,
LAVAGGIO_euro real,
MANUTENZIONE_descr  character varying(255) COLLATE pg_catalog."default" NULL,
DATA_INGRESSO_officina date,
DATA_USCITA_officina date,
MANUTENZIONE_euro real,
ALTRO_descriz character varying(255) COLLATE pg_catalog."default" NULL,
ALTRO_euro real,
SINISTRO_descriz character varying(255) COLLATE pg_catalog."default" NULL,
CONDUCENTE character varying(255) COLLATE pg_catalog."default" NULL,
DESCRIZIONE_riga character varying(255) COLLATE pg_catalog."default" NOT NULL,
costo_TOTALE_riga real NOT NULL,
franchigia_ASSICURAZIONE real NULL,
CONSTRAINT targa#placeholder#__pkey PRIMARY KEY (targa#placeholder#_id)
)
TABLESPACE pg_default;
ALTER TABLE public.contacts
    OWNER to postgres;
----------------------------------------------------######################################
GE135ZJ

CREATE TABLE IF NOT EXISTS public.GE135ZJ
(
	GE135ZJ_id integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
	DATA date,
	KM real,
	RIFORNIMENTO_luogo character varying(255) COLLATE pg_catalog."default" NOT NULL,
	LITRI real,
	GASOLIO_euro_litro	real,
	GASOLIO_euro real,
	ACCESSORI_descr  character varying(255) COLLATE pg_catalog."default" NULL,
	ACCESSORI_euro	real,
	LAVAGGIO_descr  character varying(255) COLLATE pg_catalog."default" NULL,
	LAVAGGIO_euro real,
	MANUTENZIONE_descr  character varying(255) COLLATE pg_catalog."default" NULL,
	DATA_INGRESSO_officina date,
	DATA_USCITA_officina date,
	MANUTENZIONE_euro real,
	ALTRO_descriz character varying(255) COLLATE pg_catalog."default" NULL,
	ALTRO_euro real,
	SINISTRO_descriz character varying(255) COLLATE pg_catalog."default" NULL,
	CONDUCENTE character varying(255) COLLATE pg_catalog."default" NULL,
	DESCRIZIONE_riga character varying(255) COLLATE pg_catalog."default" NOT NULL,
	costo_TOTALE_riga real NOT NULL,
	franchigia_ASSICURAZIONE real NULL,
	CONSTRAINT GE135ZJ_pkey PRIMARY KEY (GE135ZJ_id)
)
TABLESPACE pg_default;
ALTER TABLE public.GE135ZJ
    OWNER to postgres;

----------------------------------------------------######################################




-- Table: public.contacts

-- DROP TABLE public.contacts;

CREATE TABLE IF NOT EXISTS public.contacts
(
    contact_id integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    customer_id integer,
    contact_name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    phone character varying(15) COLLATE pg_catalog."default",
    email character varying(100) COLLATE pg_catalog."default",
    CONSTRAINT contacts_pkey PRIMARY KEY (contact_id),
    CONSTRAINT fk_customer FOREIGN KEY (customer_id)
        REFERENCES public.customers (customer_id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
)

TABLESPACE pg_default;

ALTER TABLE public.contacts
    OWNER to postgres;
	
-- Table: public.accounts

-- DROP TABLE public.accounts;

CREATE TABLE IF NOT EXISTS public.accounts
(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    name character varying(100) COLLATE pg_catalog."default" NOT NULL,
    balance numeric(15,2) NOT NULL,
    CONSTRAINT accounts_pkey PRIMARY KEY (id)
)

TABLESPACE pg_default;

ALTER TABLE public.accounts
    OWNER to postgres;


-- Table: public.customers

-- DROP TABLE public.customers;

CREATE TABLE IF NOT EXISTS public.customers
(
    customer_id integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    customer_name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT customers_pkey PRIMARY KEY (customer_id)
)

TABLESPACE pg_default;

ALTER TABLE public.customers
    OWNER to postgres;

	
-- Table: public.zetadump

-- DROP TABLE public.zetadump;

CREATE TABLE IF NOT EXISTS public.zetadump
(
    id_zetadump integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    re_s double precision NOT NULL,
    im_s double precision NOT NULL,
    re_z double precision NOT NULL,
    im_z double precision NOT NULL,
    re_image double precision NOT NULL,
    im_image double precision NOT NULL,
    CONSTRAINT zetadump_pkey PRIMARY KEY (id_zetadump)
)

TABLESPACE pg_default;

ALTER TABLE public.zetadump
    OWNER to postgres;

	
-- Table: public.dump2021dez30

-- DROP TABLE public.dump2021dez30;

CREATE TABLE IF NOT EXISTS public.dump2021dez30
(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    abscissa double precision,
    ordinate double precision,
    CONSTRAINT dump2021dez30_pkey PRIMARY KEY (id)
)

TABLESPACE pg_default;

ALTER TABLE public.dump2021dez30
    OWNER to postgres;
	
----
-- PROCEDURE: public.transfer(integer, integer, numeric)

-- DROP PROCEDURE public.transfer(integer, integer, numeric);

CREATE OR REPLACE PROCEDURE public.transfer(
	IN sender integer,
	IN receiver integer,
	IN amount numeric)
LANGUAGE 'plpgsql'
AS $BODY$
begin
    -- subtracting the amount from the sender's account 
    update accounts 
    set balance = balance - amount 
    where id = sender;

    -- adding the amount to the receiver's account
    update accounts 
    set balance = balance + amount 
    where id = receiver;

    commit;
end;
$BODY$;
	
-- PROCEDURE: public.usp_dump2021dez30_insert(double precision, double precision)

-- DROP PROCEDURE public.usp_dump2021dez30_insert(double precision, double precision);

CREATE OR REPLACE PROCEDURE public.usp_dump2021dez30_insert(
	IN par_abscissa double precision,
	IN par_ordinate double precision)
LANGUAGE 'plpgsql'
AS $BODY$
begin
insert into dump2021Dez30(
abscissa,
ordinate   ) values(
Par_abscissa,
Par_ordinate );
commit;
end;
$BODY$;
-----------------------
-- PROCEDURE: public.usp_zetadump_insert(double precision, double precision, double precision, double precision, double precision, double precision)

-- DROP PROCEDURE public.usp_zetadump_insert(double precision, double precision, double precision, double precision, double precision, double precision);

CREATE OR REPLACE PROCEDURE public.usp_zetadump_insert(
	IN par_re_s double precision,
	IN par_im_s double precision,
	IN par_re_z double precision,
	IN par_im_z double precision,
	IN par_re_image double precision,
	IN par_im_image double precision)
LANGUAGE 'plpgsql'
AS $BODY$
begin
insert into zetadump(
    re_s,
    im_s,
    re_z,
    im_z,
    re_image,
    im_image
  ) values(
par_re_s,
par_im_s,
par_re_z,
par_im_z,
par_re_image,
par_im_image   );
commit;
end;
$BODY$;
------------------------------
	
	